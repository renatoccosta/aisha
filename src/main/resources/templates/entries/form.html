<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${mode == 'create'} ? #{entries.form.title.create} : #{entries.form.title.edit}"></title>
    <link rel="stylesheet" th:href="@{/css/app.css}">
    <link rel="icon" type="image/svg+xml" th:href="@{/img/logo-option-1.svg}">
</head>
<body>
<header th:replace="~{fragments/header :: topbar(subtitle=#{entries.form.header.subtitle})}"></header>

<main class="wrap">
    <section class="card form-card">
        <h2 th:text="${mode == 'create'} ? #{entries.form.title.create} : #{entries.form.title.edit}"></h2>

        <form th:object="${form}" th:action="${mode == 'create'} ? @{/entries} : @{/entries/{id}(id=${entryId})}" method="post">
            <div class="grid-2">
                <div class="field">
                    <label for="account" th:text="#{entries.form.field.account.required}"></label>
                    <select id="account" th:field="*{accountId}" required>
                        <option value="" th:text="#{entries.form.field.account.placeholder}"></option>
                        <option
                            th:each="account : ${accountOptions}"
                            th:value="${account.id}"
                            th:text="${account.title}">
                        </option>
                    </select>
                    <p class="error" th:if="${#fields.hasErrors('accountId')}" th:errors="*{accountId}"></p>
                </div>

                <div class="field">
                    <label for="categoryId" th:text="#{entries.form.field.category.required}"></label>
                    <select id="categoryId" th:field="*{categoryId}">
                        <option value="" th:text="#{entries.form.field.category.placeholder}"></option>
                        <option
                            th:each="option : ${categoryOptions}"
                            th:value="${option.id()}"
                            th:text="${option.label()}">
                        </option>
                    </select>
                    <p class="error" th:if="${#fields.hasErrors('categoryId')}" th:errors="*{categoryId}"></p>
                    <p class="helper" th:text="#{entries.form.field.category.help}"></p>
                </div>
            </div>

            <div class="field">
                <label for="newCategoryTitle" th:text="#{entries.form.field.newCategoryTitle}"></label>
                <input
                    id="newCategoryTitle"
                    type="text"
                    th:field="*{newCategoryTitle}"
                    maxlength="120"
                    th:placeholder="#{entries.form.field.newCategoryTitle.placeholder}">
                <p class="error" th:if="${#fields.hasErrors('newCategoryTitle')}" th:errors="*{newCategoryTitle}"></p>
                <p class="helper" th:text="#{entries.form.field.newCategoryTitle.help}"></p>
            </div>

            <div class="grid-2">
                <div class="field">
                    <label for="movementDate" th:text="#{entries.form.field.movementDate.required}"></label>
                    <input id="movementDate" type="date" th:field="*{movementDate}" required>
                    <p class="error" th:if="${#fields.hasErrors('movementDate')}" th:errors="*{movementDate}"></p>
                </div>

                <div class="field">
                    <label for="settlementDate" th:text="#{entries.form.field.settlementDate.required}"></label>
                    <input id="settlementDate" type="date" th:field="*{settlementDate}" required>
                    <p class="error" th:if="${#fields.hasErrors('settlementDate')}" th:errors="*{settlementDate}"></p>
                </div>
            </div>

            <div class="field">
                <label for="description" th:text="#{entries.form.field.description.required}"></label>
                <input id="description" type="text" th:field="*{description}" maxlength="200" required>
                <p class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></p>
            </div>

            <div class="field">
                <label for="amount" th:text="#{entries.form.field.amount.required}"></label>
                <input id="amount" type="number" th:field="*{amount}" step="0.01" required>
                <p class="error" th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}"></p>
            </div>

            <div class="field">
                <label for="notes" th:text="#{entries.form.field.notes}"></label>
                <textarea id="notes" th:field="*{notes}" rows="4" maxlength="1000"></textarea>
                <p class="error" th:if="${#fields.hasErrors('notes')}" th:errors="*{notes}"></p>
            </div>

            <div class="actions-inline">
                <button class="btn btn-primary" type="submit" th:text="${mode == 'create'} ? #{entries.form.action.save} : #{entries.form.action.update}"></button>
                <a class="btn btn-secondary" th:href="@{/entries}" th:text="#{entries.form.action.cancel}"></a>
            </div>
        </form>
    </section>
</main>
</body>
</html>
